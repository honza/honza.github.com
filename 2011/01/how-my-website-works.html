<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="description" content="Thoughts on web programming, open source hacking and the like. Honza Pokorny is a web developer in Halifax, Canada" >
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>How My Website Works - Honza Pokorny</title>
  <link rel="stylesheet" href="/media/screen.css" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="News-Feed" href="http://honza.ca/atom.xml" />
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-4330851-12']);
        _gaq.push(['_trackPageview']);

        (function(){
         var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
         ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
         var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>    

    <script type="text/javascript">
    /* <![CDATA[ */
        (function() {
            var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
            
            s.type = 'text/javascript';
            s.async = true;
            s.src = 'https://api.flattr.com/js/0.6/load.js?mode=auto'
            
            t.parentNode.insertBefore(s, t);
        })();
    /* ]]> */
    </script>
        
</head>
<body>

    <div id="wrap">
        <div id="banner" class="body">
            <h1><a href="/">Honza Pokorny</a></h1>
        </div>
        <p>Thoughts on web programming and the world of technology</p>
        

<p class="article_date date">
    January 22, 2011, reading time: about one minute
</p>

<div id="content">
    <div class="section" id="how-my-website-works">
<h1>How My Website&nbsp;Works</h1>
<p>I&#8217;m sure you&#8217;ve heard of static site generators like Jekyll (Ruby) or Hyde
(Python). The benefits are obvious - your site is hosted on a cheap shared
hosting and it can easily survive the Digg/Slashdot/Reddit effect. There is no
database latency - the browser requests a file on the server and gets it back&nbsp;immediately.</p>
<div class="section" id="update-2011-02-27">
<h2>Update&nbsp;(2011-02-27):</h2>
<p>While I still use a static generator to power my site, it&#8217;s not a different
engine. I got tired of launching a django server just to write a post. I wrote
a new static site generator called <a class="reference external" href="https://github.com/honza/socrates">Socrates</a>. Each post is now a separate
file written in Markdown. Socrates then runs through those files and creates a
site for me. I&#8217;m still using django templates. What follows is the original&nbsp;post.</p>
</div>
<div class="section" id="django">
<h2>django</h2>
<p>The site is a simple django blog. There is nothing really of note when it comes
to django-specific coding. I run the django server locally when I&#8217;m editing or
adding articles. It provides a nice <span class="caps">UI</span>. It also lets me easily preview the site
without generating&nbsp;anything.</p>
</div>
<div class="section" id="static-generator">
<h2>static&nbsp;generator</h2>
<p>When I&#8217;m happy with the state of the website and want to publish it, I run the
static generator. It&#8217;s contained in the <tt class="docutils literal">generate.py</tt> file. It runs through
all possible urls and for each one it generates a static file. Each file is a
complete <span class="caps">HTML</span> page that the user&#8217;s browser will download. The folder structure
is as&nbsp;follows:</p>
<div class="highlight"><pre>/2010/
    /02/
        post-one.html
        post-two.html
/2011/
    ..
        ..
/about/
    index.html
index.html
/page/
    /2/
        index.html
/category/
    /android/
        index.html
    /code/
        index.html
    ..
</pre></div>
<p>You get the idea. This way, with an <tt class="docutils literal">.htaccess</tt> file we can have the
following <span class="caps">URL</span>&nbsp;structure:</p>
<div class="highlight"><pre>/2010/02/post-one/
</pre></div>
</div>
<div class="section" id="ftp-deploy-script">
<h2><span class="caps">FTP</span> deploy&nbsp;script</h2>
<p>And the final piece is the <tt class="docutils literal">deploy.py</tt> script. It looks at the deploy
directory, and with a little help from git, it figures out what files were
changed since the last deploy. It then takes those files and throws them up on
the server. A normal shared&nbsp;hosting.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>You can check out the code on <a class="reference external" href="https://github.com/honza/honza.github.com">Github</a>.</p>
</div>
</div>

</div>

<span class="article_buttons">
    <script src="https://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <a href="https://twitter.com/share" class="twitter-share-button"
        data-url="http://honza.ca/2011/01/how-my-website-works"
        data-via="_honza"
        data-text="How My Website Works"
        data-count="none">Tweet</a>
    <a href="http://honza.ca/2011/01/how-my-website-works"
        class="FlattrButton"
        rev="flattr;uid:honza;button:compact;"
        title="How My Website Works"
        style="display:none"></a>

</span>


    </div>

</body>
</html>